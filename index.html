<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Rocket Mission Control</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0f0f0f;
            color: #e0e0e0;
            padding: 16px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #333;
            margin-bottom: 24px;
        }
        
        header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }
        
        .last-updated {
            color: #888;
            font-size: 14px;
        }
        
        .section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-grid {
            display: grid;
            gap: 12px;
        }
        
        .status-item {
            padding: 12px;
            background: #252525;
            border-radius: 8px;
            border-left: 4px solid #4a9eff;
        }
        
        .status-item strong {
            color: #4a9eff;
            display: block;
            margin-bottom: 4px;
        }
        
        .task {
            padding: 12px;
            background: #252525;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 4px solid #888;
        }
        
        .task.high {
            border-left-color: #ff4444;
        }
        
        .task.medium {
            border-left-color: #ffaa00;
        }
        
        .task.low {
            border-left-color: #4a9eff;
        }
        
        .task.done {
            border-left-color: #44ff44;
            opacity: 0.6;
        }
        
        .task.in_progress {
            border-left-color: #ffaa00;
        }
        
        .task-title {
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .task-meta {
            font-size: 13px;
            color: #888;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-badge.done {
            background: #44ff44;
            color: #000;
        }
        
        .status-badge.in_progress {
            background: #ffaa00;
            color: #000;
        }
        
        .status-badge.pending {
            background: #888;
            color: #fff;
        }
        
        .status-badge.active {
            background: #4a9eff;
            color: #fff;
        }
        
        .cron-item {
            padding: 10px;
            background: #252525;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .cron-time {
            color: #4a9eff;
            font-weight: 500;
        }
        
        .activity-item {
            padding: 10px;
            background: #252525;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .activity-time {
            color: #888;
            font-size: 12px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }
        
        .stat-card {
            background: #252525;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: 600;
            color: #4a9eff;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #888;
        }
        
        .blocker {
            background: #2a1a1a;
            border-left: 4px solid #ff4444;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .milestone {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: #252525;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 12px;
            }
            
            .section {
                padding: 16px;
            }
            
            .section-title {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Rocket Mission Control</h1>
            <div class="last-updated" id="lastUpdated">Loading...</div>
        </header>
        
        <div class="section">
            <div class="section-title">üìä Current Status</div>
            <div class="status-grid" id="statusGrid">
                <div class="status-item">
                    <strong>Loading...</strong>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üéØ Your Tasks</div>
            <div id="kyleTasks">
                <div class="task">Loading...</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">ü§ñ Rocket's Tasks</div>
            <div id="rocketTasks">
                <div class="task">Loading...</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">‚è∞ Scheduled Tasks</div>
            <div id="cronSchedule">
                <div class="cron-item">Loading...</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üöß Blockers</div>
            <div id="blockers">
                <div class="blocker">Loading...</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üìà Quick Stats</div>
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-value">...</div>
                    <div class="stat-label">Loading</div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üèÜ Milestones</div>
            <div id="milestones">
                <div class="milestone">Loading...</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üìù Recent Activity</div>
            <div id="recentActivity">
                <div class="activity-item">Loading...</div>
            </div>
        </div>
    </div>
    
    <script>
        function formatTime(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            return `${days}d ago`;
        }
        
        function formatCronTime(isoString) {
            if (isoString.includes('Every')) return isoString;
            const date = new Date(isoString);
            return date.toLocaleString('en-US', { 
                weekday: 'short', 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
        }
        
        async function loadDashboard() {
            try {
                const response = await fetch('./dashboard.json');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                const data = await response.json();
                
                // Last updated
                document.getElementById('lastUpdated').textContent = 
                    `Last updated: ${formatTime(data.lastUpdated)}`;
                
                // Status
                const statusGrid = document.getElementById('statusGrid');
                statusGrid.innerHTML = `
                    <div class="status-item">
                        <strong>Rocket:</strong>
                        ${data.status.rocket}
                    </div>
                    <div class="status-item">
                        <strong>Kyle:</strong>
                        ${data.status.kyle}
                    </div>
                    <div class="status-item" style="border-left-color: #ff4444;">
                        <strong>Blocked:</strong>
                        ${data.status.blocked}
                    </div>
                `;
                
                // Kyle's tasks
                const kyleTasks = document.getElementById('kyleTasks');
                kyleTasks.innerHTML = data.tasks.kyle.map(task => `
                    <div class="task ${task.priority} ${task.status}">
                        <div class="task-title">${task.task}</div>
                        <div class="task-meta">
                            <span class="status-badge ${task.status}">${task.status.replace('_', ' ')}</span>
                            <span>üìÖ ${task.deadline}</span>
                        </div>
                    </div>
                `).join('');
                
                // Rocket's tasks
                const rocketTasks = document.getElementById('rocketTasks');
                rocketTasks.innerHTML = data.tasks.rocket.map(task => `
                    <div class="task ${task.priority} ${task.status}">
                        <div class="task-title">${task.task}</div>
                        <div class="task-meta">
                            <span class="status-badge ${task.status}">${task.status.replace('_', ' ')}</span>
                            <span>üìÖ ${task.deadline}</span>
                        </div>
                    </div>
                `).join('');
                
                // Cron schedule
                const cronSchedule = document.getElementById('cronSchedule');
                cronSchedule.innerHTML = data.cronSchedule.map(cron => `
                    <div class="cron-item">
                        <div><span class="cron-time">${formatCronTime(cron.time)}</span> - ${cron.task}</div>
                        <div style="color: #888; font-size: 12px; margin-top: 4px;">${cron.description}</div>
                    </div>
                `).join('');
                
                // Blockers
                const blockers = document.getElementById('blockers');
                blockers.innerHTML = Object.entries(data.blockers).map(([key, value]) => `
                    <div class="blocker">
                        <strong>${key.replace('_', ' ')}:</strong> ${value}
                    </div>
                `).join('');
                
                // Stats
                const statsGrid = document.getElementById('statsGrid');
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-value">${data.quickStats.btcPrice}</div>
                        <div class="stat-label">Bitcoin</div>
                        <div style="font-size: 12px; color: ${data.quickStats.btcChange24h.startsWith('-') ? '#ff4444' : '#44ff44'}; margin-top: 4px;">
                            ${data.quickStats.btcChange24h}
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${data.quickStats.twitterAccounts}</div>
                        <div class="stat-label">Twitter Accounts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${data.quickStats.contentPagesReady}</div>
                        <div class="stat-label">Content Pages</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${data.quickStats.conwayProgress}</div>
                        <div class="stat-label">Conway Research</div>
                    </div>
                `;
                
                // Milestones
                const milestones = document.getElementById('milestones');
                milestones.innerHTML = Object.entries(data.milestones).map(([key, value]) => {
                    const parts = value.split(' ');
                    const emoji = parts[0];
                    const rest = parts.slice(1).join(' ');
                    return `
                        <div class="milestone">
                            <span style="font-size: 18px;">${emoji}</span>
                            <span>${key.replace(/_/g, ' ')} - ${rest}</span>
                        </div>
                    `;
                }).join('');
                
                // Recent activity
                const recentActivity = document.getElementById('recentActivity');
                recentActivity.innerHTML = data.recentActivity.slice(0, 5).map(activity => `
                    <div class="activity-item">
                        <div>${activity.action}</div>
                        <div class="activity-time">${formatTime(activity.timestamp)} ‚Ä¢ ${activity.category}</div>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('Failed to load dashboard:', error);
                document.getElementById('lastUpdated').textContent = `Error loading dashboard: ${error.message}`;
                document.getElementById('lastUpdated').style.color = '#ff4444';
            }
        }
        
        // Load dashboard on page load
        loadDashboard();
        
        // Auto-refresh every 60 seconds
        setInterval(loadDashboard, 60000);
    </script>
</body>
</html>
